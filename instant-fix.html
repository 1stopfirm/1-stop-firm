<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy Consultation | 1StopFirm - Instant Fix</title>
    
    <!-- Original CSS files -->
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/strategy-consultation.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- GSAP for advanced animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/TextPlugin.min.js"></script>
    
    <!-- AOS for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Particles.js for particle effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- Critical CSS variables to ensure all sections are visible -->
    <style>
        :root {
            --primary: #6d28d9 !important;
            --primary-dark: #5b21b6 !important;
            --secondary: #FF0080 !important;
            --secondary-dark: #CF006B !important;
            --accent: #00CFFD !important;
            --dark: #121212 !important;
            --light: #FFFFFF !important;
            --gray: #F4F7FC !important;
            --text: #333333 !important;
            --text-light: #777777 !important;
        }
        
        /* Ensure all sections are visible */
        section, .section, 
        #services, #process, #case-studies,
        .services-grid, .process-timeline, .tabs-container,
        .case-studies-section, .cta-section {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        /* Fix AOS elements */
        [data-aos] {
            opacity: 1 !important;
            transform: none !important;
            visibility: visible !important;
        }
        
        /* Fix notification */
        .fix-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 9999;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: fadeInOut 5s forwards;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(20px); }
            10% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <!-- Loading indicator -->
    <div class="page-loader">
        <div class="loader">
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
            <div class="loader-circle"></div>
        </div>
    </div>

    <!-- Frame that loads the original page -->
    <iframe id="pageFrame" src="strategy-consultation.html" style="display: none; border: none; width: 100%; height: 100vh;"></iframe>

    <!-- Fix notification -->
    <div class="fix-notification">
        Fixed version loaded successfully!
    </div>

    <script>
        // Fix script to be injected into the iframe
        document.addEventListener('DOMContentLoaded', function() {
            const iframe = document.getElementById('pageFrame');
            const originalContent = document.createElement('div');
            
            iframe.addEventListener('load', function() {
                try {
                    // Access iframe document
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    
                    // Get all content from the iframe
                    const html = iframeDoc.documentElement.innerHTML;
                    
                    // Clean up the current page
                    document.body.innerHTML = '';
                    
                    // Apply the iframe content to the current page
                    document.documentElement.innerHTML = html;
                    
                    // Apply our fixes
                    applyFixes();
                    
                    // Remove the iframe
                    iframe.remove();
                } catch (error) {
                    console.error('Error applying fix:', error);
                    // If error, show the iframe directly
                    iframe.style.display = 'block';
                    document.querySelector('.page-loader').style.display = 'none';
                }
            });
            
            // Apply fixes function
            function applyFixes() {
                console.log('Applying fixes...');
                
                // Initialize AOS
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 800,
                        once: true,
                        mirror: false,
                        disable: true // Disable AOS to ensure elements are visible
                    });
                }
                
                // Force all sections to be visible
                const selectors = [
                    'section', '.section', 
                    '#services', '#process', '#case-studies',
                    '.services-grid', '.process-timeline', '.tabs-container',
                    '.case-studies-section', '.cta-section'
                ];
                
                selectors.forEach(selector => {
                    document.querySelectorAll(selector).forEach(el => {
                        el.style.display = 'block';
                        el.style.opacity = '1';
                        el.style.visibility = 'visible';
                    });
                });
                
                // Make all AOS elements visible
                document.querySelectorAll('[data-aos]').forEach(el => {
                    el.classList.add('aos-animate');
                    el.style.opacity = '1';
                    el.style.transform = 'none';
                    el.style.visibility = 'visible';
                });
                
                // Initialize particle effects if present
                if (typeof particlesJS !== 'undefined') {
                    const particlesContainer = document.getElementById('hero-particles');
                    if (particlesContainer) {
                        particlesJS('hero-particles', {
                            particles: {
                                number: { value: 80, density: { enable: true, value_area: 800 } },
                                color: { value: "#ffffff" },
                                opacity: { value: 0.5, random: true },
                                size: { value: 3, random: true },
                                line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4 },
                                move: { enable: true, speed: 1 }
                            }
                        });
                    }
                }
                
                // Add fix notification
                const notification = document.createElement('div');
                notification.className = 'fix-notification';
                notification.textContent = 'Fixed version loaded successfully!';
                document.body.appendChild(notification);
                
                // Remove notification after 5 seconds
                setTimeout(() => {
                    notification.remove();
                }, 5000);
                
                console.log('Fixes applied successfully');
            }
        });
    </script>
</body>
</html> 